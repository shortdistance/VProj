<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        html, body {
          height: 100%;
          margin: 0;
          padding: 0;
        }
        #map {
          float: left;
          height: 100%;
          width: 79%;
        }
        #content-window {
          float: left;
          font-family: 'Roboto','sans-serif';
          height: 100%;
          line-height: 30px;
          padding-left: 10px;
          width: 19%;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="content-window"></div>

    <!-- Replace the value of the key parameter with your own API key. -->
    <!--<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk&callback=initialize">-->
    <!-- <script src="https://maps.google.com/maps/api/js?sensor=false"></script> -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDubq5gCNwyhQ48XZDgcGxjAPEVn_hVjY0&callback=initMap"></script>
    <script>

        var map;
        var chicago = {lat: 41.85, lng: -87.65};

        function CenterControl(controlDiv, map) {

          // Set CSS for the control border.
          var controlUI = document.createElement('div');
          controlUI.style.backgroundColor = '#fff';
          controlUI.style.border = '2px solid #fff';
          controlUI.style.borderRadius = '3px';
          controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
          controlUI.style.cursor = 'pointer';
          controlUI.style.marginBottom = '22px';
          controlUI.style.textAlign = 'center';
          controlUI.title = 'Click to recenter the map';
          controlDiv.appendChild(controlUI);

          // Set CSS for the control interior.
          var controlText = document.createElement('div');
          controlText.style.color = 'rgb(25,25,25)';
          controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
          controlText.style.fontSize = '16px';
          controlText.style.lineHeight = '38px';
          controlText.style.paddingLeft = '5px';
          controlText.style.paddingRight = '5px';
          controlText.innerHTML = 'Center Map';
          controlUI.appendChild(controlText);

          // Setup the click event listeners: simply set the map to Chicago.
          controlUI.addEventListener('click', function() {
            map.setCenter(chicago);
          });

        }

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
            zoom: 4,
            center: {lat: 37.06, lng: -95.68}
          });

          postcodelist = ['AB', 'DD', 'DG', 'EH', 'FK', 'G', 'HS', 'IV', 'KA', 'KW', 'KY', 'ML', 'PA', 'PH', 'TD', 'ZE'];

          for(var i=0;i<postcodelist.length; i++){
            var georssLayer = new google.maps.KmlLayer({
                map: map,
                suppressInfoWindows: true,
                url: 'https://www.doogal.co.uk/kml/'+postcodelist[i]+'.kml'
            });
            //georssLayer.setMap(map);
              georssLayer.addListener('click', function(kmlEvent) {
                var text = kmlEvent.featureData.description;
                showInContentWindow(text);
              });
          }
          function showInContentWindow(text) {
            var sidediv = document.getElementById('content-window');
            sidediv.innerHTML = text;
          }

          var centerControlDiv = document.createElement('div');
          var centerControl = new CenterControl(centerControlDiv, map);

          centerControlDiv.index = 1;
          map.controls[google.maps.ControlPosition.TOP_CENTER].push(centerControlDiv);
        }

    </script>
</body>
</html>